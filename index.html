<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title> Hack 101 <3 </title>
        <link rel="stylesheet" href="style.css">
        <script src="main.js" defer></script>
</head>
<body>
    <h1>Heel Tracker</h1>
    <form action="javascript:;" onsubmit="submitted(event)">
        <label for="location">Location: </label>
        <select id="location" name="location">
          <option value="davis">Davis Library </option>
          <option value="bolo">BOLO</option>
          <option value="tolo">TOLO</option>
          <option value="rams">Rams Head Rec Center</option>
          <option value="src">SRC Gym</option>
          <option value="ul">UL Library</option>
        </select>
    <br>
        <label for="busy">Occupancy: </label>
        <select id="busy" name="busy">
          <option value="0">0 </option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
        <br>
        <label for="noise">Noise: </label>
        <select id="noise" name="noise">
          <option value="0">0 </option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
    <br>
        <input type="submit">
    </form>
    <input type="file" id="busy_places_dataset" accept=".csv">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

    <script>
        submitted = function(event){
            event.preventDefault(); // Prevent form submission from reloading the page
        
            var form = event.target; 
            var occupancyValue = form.elements["busy"].value; 
            var locationValue = form.elements["location"].value;
            var noiseValue = form.elements["noise"].value;

            //TODO switch from occupancy value to value from data
            var seatsArr = calcSeating(occupancyValue, locationValue);
            var seatsValue = seatsArr[0];
            var seatsType = seatsArr[1];

            alert("Feedback submitted. Occupancy: " + occupancyValue + ", Location: " + locationValue + ", Noise: "+ noiseValue + ", Estimated Availiable "+seatsType+": " + seatsValue + ".");

        }
        
        calcSeating = function (busy, location){
            var seats = 0;
            var type = "seats";
            switch(location){
                case "davis": 
                    seats == 150+60+40+40+70+(6 * (40+80));
                case "bolo":
                    seats == 250;
                case "tolo":
                    seats == 450;
                case "rams":
                    seats == 16+14+10+10+3+8+10;
                    type == "machines";
                case "src":
                    seats == 80 +20 + 12+ 6 +6+4+30;
                    type == "machines";
                case "ul": 
                    seats == 500;
                default: 
                    alert("LOCATION INVALID, CALC SEATING ERROR.");
                    seats == -1;
                    type == "NULL"
            }

            var seatsAvail = seats * (100 - busy * 20.0);

            return {seatsAvail, type}
        }
        function parseCSV(csvText) {
            console.log("TESTING")
            Papa.parse(csvText, {
                header: true,
                complete: function(results) {
                    console.log(results.data); // Print CSV data
                }
            });
        }
     </script>
</body>
			</html>


